<?xml version="1.0" encoding="utf-8"?>
<UserControl
    x:Class="SimpleExportBingMapsCollection.BingMapsExtractorControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:SimpleExportBingMapsCollection"
    xmlns:controls="using:CommunityToolkit.WinUI.UI.Controls"    
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <MenuBar Grid.Row="0" >
            <MenuBarItem Title="File">
                <MenuFlyoutItem Text="Export CSV compatible with Google Maps" Click="OnFile_Export_GoogleMapsCsv"/>
                <MenuFlyoutItem Text="Export GeoJSON" Click="OnFile_Export_GeoJson"/>
                <MenuFlyoutItem Text="Export HTML" Click="OnFile_Export_Html"/>
                <MenuFlyoutItem Text="Export Markdown" Click="OnFile_Export_Markdown"/>
                <MenuFlyoutItem Text="Re-extract from the map" Click="OnFile_Reextract"/>
                <!-- 
                <MenuFlyoutItem Text="Export Map Maker CSV" Click="OnFile_Export_MapMakerCsv"/>
                -->
                <MenuFlyoutItem Text="Exit" Click="OnFile_Exit"/>
            </MenuBarItem>
            <MenuBarItem Title="Developer">
                <ToggleMenuFlyoutItem Text="Set Filming Mode" Click="OnDeveloper_Filming" />
                <MenuFlyoutItem Text="Show Logging" Click="OnDeveloper_Log" />
            </MenuBarItem>
            <MenuBarItem Title="Help">
                <MenuFlyoutItem Text="Help" Click="OnHelp_Help"/>
                <MenuFlyoutItem Text="About" Click="OnHelp_About"/>
            </MenuBarItem>
        </MenuBar>
        <Grid Grid.Row="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="1*" />
                <ColumnDefinition Width="3*" />
            </Grid.ColumnDefinitions>
            <!-- URL -->
            <Grid Grid.Row="1" Grid.ColumnSpan="2">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <TextBox Grid.Column="0" x:Name="uiUrlTextBox" Grid.Row="0" Text="https://www.bing.com/maps" />
                <Button Content="Go" Grid.Column="1" Click="GoButton_Click" />
            </Grid>
            <WebView2 x:Name="uiWebView" Grid.Row="2" Grid.ColumnSpan="2" />
            <TextBlock Grid.Row="3" x:Name="uiStatus" TextWrapping="Wrap" Text="Be sure to log in to see your collections" IsTextSelectionEnabled="True" Grid.ColumnSpan="2" KeyDown="OnStatusKeyDown" />
            <Canvas x:Name="uiFilming" Grid.Row="2" Visibility="Collapsed" Grid.ColumnSpan="2" >
                <Image Canvas.Left="920" Canvas.Top="10" Source="/Assets/Privacy/UserHeadshot.png"  />
                <Image x:Name="uiFilmingMyCollections" Canvas.Left="10" Canvas.Top="70" Source="/Assets/Privacy/MyCollections.png" Visibility="Collapsed" IsHitTestVisible="False"  />
                <Image x:Name="uiFilmingMyFavorites" Canvas.Left="10" Canvas.Top="70" Source="/Assets/Privacy/MyFavorites.png" Visibility="Collapsed" IsHitTestVisible="False"   />
                <Image x:Name="uiFilmingLocalGuide" Canvas.Left="10" Canvas.Top="70" Source="/Assets/Privacy/LocalGuide.png" IsHitTestVisible="False"   />
            </Canvas>
            <!-- HELP -->
            <Border x:Name="uiHelpBorder" Grid.Column="1" Grid.RowSpan="4" Margin="2" Padding="5" BorderBrush="Black" Background="White" BorderThickness="1" Visibility="Collapsed">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <Border Background="LightGray" HorizontalAlignment="Stretch" Tapped="OnCloseHelpTap">
                        <Grid HorizontalAlignment="Stretch">
                            <TextBlock>HELP</TextBlock>
                            <TextBlock HorizontalAlignment="Right">X</TextBlock>
                        </Grid>
                    </Border>

                    <ScrollViewer Grid.Row="1">
                        <controls:MarkdownTextBlock x:Name="uiHelpText" 
                FontFamily="Segoe UI,Segoe MDL2 Assets"
                ImageStretch="None"
                />
                    </ScrollViewer>
                </Grid>
            </Border>
            <!-- Developer -->
            <Border x:Name="uiDeveloperBorder" Grid.Column="1" Grid.RowSpan="4" Margin="2" Padding="5" BorderBrush="Black" Background="White" BorderThickness="1" Visibility="Collapsed">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <Border Background="LightSlateGray" HorizontalAlignment="Stretch" Tapped="OnCloseHelpTap">
                        <Grid HorizontalAlignment="Stretch">
                            <TextBlock>Developer Information</TextBlock>
                            <TextBlock HorizontalAlignment="Right">X</TextBlock>
                        </Grid>
                    </Border>
                    <ScrollView Grid.Row="1">
                        <TextBlock x:Name="uiDeveloper" TextWrapping="Wrap" IsTextSelectionEnabled="True" />
                    </ScrollView>
                </Grid>
            </Border>
        </Grid>
    </Grid>
</UserControl>
